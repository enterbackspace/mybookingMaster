   <!-- üîç Search Bar -->
  <mat-form-field class="search-field mt-3" appearance="outline">
    <mat-label>Search</mat-label>
    <input matInput placeholder="Search products..." [(ngModel)]="Search" />
    <button mat-icon-button matSuffix >
      <mat-icon>search</mat-icon>
    </button>
  </mat-form-field>
<div class="product-container">
  <mat-card class="product-card" *ngFor="let product of product | search:Search">
    <!-- Image + Favorite Button Wrapper -->
    <div class="image-wrapper" [routerLink]="['/dash/productdetails', product.id]">
      <img mat-card-image [src]="product.imageUrl" alt="{{ product.ProductName }}" />
      <!-- Out of stock badge -->
      <div class="stock-badge" *ngIf="product.stock <= 0">Out of Stock</div>
      <!-- Favorite button: stops click propagation -->
      <button
        class="favorite-btn"
        matTooltip="Add to Wishlist"
        aria-label="Toggle favorite"
        (click)="toggleFavoriteStatus(product); $event.stopPropagation()"
>
        <ng-container *ngIf="product.favorite; else notFav">‚ù§Ô∏è</ng-container>
        <ng-template #notFav>ü§ç</ng-template>
      </button>
    </div>
    <mat-card-content>
      <h2 class="product-name">{{ product.ProductName }}</h2>
      <p class="ingredients">üßÇ Ingredients: {{ product.Ingerdiance }}</p>

      <p class="product-type" [ngClass]="product.type">
        {{ product.type | titlecase }}
      </p>

   <!-- Pricing -->
<p class="price-info">
  <span class="mrp"><b>MRP:</b> ‚Çπ{{ product.mrp }}</span>
  <span><strong>Price:</strong>
  ‚Çπ{{ (product.mrp - (product.mrp * (product.discount.replace('%', '') / 100))) | number:'1.2-2' }}
</span>
  <span class="discount">
    You Save:
    ‚Çπ{{ (product.mrp * product.discount / 100) | number:'1.2-2' }}
    ({{ product.discount }}%)
  </span>
</p>


    </mat-card-content>
    <mat-card-actions class="action-buttons">
      <button mat-raised-button color="primary" [disabled]="product.stock <= 0"    >
        Buy Now
      </button>
      <ng-container *ngIf="!isProductAdded(product)">
        <button
          mat-raised-button
          color="accent"
          [disabled]="product.stock <= 0"
          (click)="addToCart(product)" >
          Add to Cart
        </button>
      </ng-container>
      <ng-container *ngIf="isProductAdded(product)">
        <button mat-raised-button color="warn" (click)="goToCart()">Go to Cart</button>
      </ng-container>
    </mat-card-actions>
  </mat-card>
</div>
